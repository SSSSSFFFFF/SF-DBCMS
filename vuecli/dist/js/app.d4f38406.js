(function(e){function t(t){for(var o,r,s=t[0],i=t[1],c=t[2],d=0,p=[];d<s.length;d++)r=s[d],l[r]&&p.push(l[r][0]),l[r]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);u&&u(t);while(p.length)p.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],o=!0,s=1;s<a.length;s++){var i=a[s];0!==l[i]&&(o=!1)}o&&(n.splice(t--,1),e=r(r.s=a[0]))}return e}var o={},l={app:0},n=[];function r(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=o,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(a,o,function(t){return e[t]}.bind(null,o));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=i;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var o=a("64a9"),l=a.n(o);l.a},"3bec":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var o,l=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],s={name:"app",methods:{},mounted(){}},i=s,c=(a("034f"),a("2877")),u=Object(c["a"])(i,n,r,!1,null,null,null),d=u.exports,p=a("8c4f"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("el-menu",{staticClass:"leftList el-menu-vertical-demo",attrs:{"default-active":"2","text-color":"white","background-color":"#212121","default-openeds":e.openeds},on:{open:e.handleOpen,close:e.handleClose,select:e.handleSelect}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"fa fa-database",style:e.listIconStyle}),a("span",[e._v("数据库")])]),a("el-menu-item",{attrs:{index:"1-1"}},[e._v("用户管理")]),a("el-menu-item",{attrs:{index:"1-2"}},[e._v("选项2")])],2),a("div",{staticClass:"listBottom"},[a("div",{staticClass:"signOut"},[a("p",{staticClass:"signOutName"},[e._v("Hi, "+e._s(e.name)+" !")]),a("img",{staticClass:"headImgCss",attrs:{src:e.headImg,alt:""}})]),a("el-button",{staticClass:"signOutElButton",attrs:{type:"text"},on:{click:e.open2}},[a("span",{staticClass:"signOutButton"},[a("i",{staticClass:"fa fa-sign-out",attrs:{"aria-hidden":"true"}}),e._v("\n          Sign Out\n        ")])])],1)],1),a("div",{staticClass:"rightHeader"},["1-1"==e.menuIndex?a("database"):e._e()],1)],1)},m=[],h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("a",{attrs:{href:"",download:"后台管理员.xlsx",id:"hf"}}),a("div",{staticClass:"block"},[a("div",{staticClass:"right"},[a("el-button",{on:{click:function(t){e.dialogVisible=!0}}},[a("i",{staticClass:"fa fa-user-plus",attrs:{"aria-hidden":"true"}}),e._v(" 添加用户\n            ")]),a("el-button",{on:{click:e.downloadExcel}},[a("i",{staticClass:"fa fa-file-excel-o",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.dao)+"\n            ")])],1),a("el-pagination",{attrs:{"current-page":1,"page-sizes":e.pageSizes,"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.pageTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120"}}),a("el-table-column",{attrs:{label:"头像","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticClass:"head_pic",attrs:{src:e.row.headImg,width:"40",height:"40"}})]}}])})],1),a("el-dialog",{attrs:{title:"添加用户",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{staticClass:"userInput",model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"上传头像"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"plusCenter el-icon-plus avatar-uploader-icon"})])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmAddUser}},[e._v("确 定")])],1)],1)],1)},g=[];let b=!0;function v(e,t){var a=e[0];1==b&&(e.unshift({}),b=!1);var l=[];for(var n in a)l.push(n),e[0][n]=n;a=[];e.map((e,t)=>l.map((a,o)=>Object.assign({},{v:e[a],position:(o>25?w(o):String.fromCharCode(65+o))+(t+1)}))).reduce((e,t)=>e.concat(t)).forEach((e,t)=>a[e.position]={v:e.v});var r=Object.keys(a),s={SheetNames:["mySheet"],Sheets:{mySheet:Object.assign({},a,{"!ref":r[0]+":"+r[r.length-1]})}};o=new Blob([S(XLSX.write(s,{bookType:void 0==t?"xlsx":t,bookSST:!1,type:"binary"}))],{type:""});var i=URL.createObjectURL(o);document.getElementById("hf").href=i,document.getElementById("hf").click(),setTimeout(function(){URL.revokeObjectURL(o)},100)}function S(e){for(var t=new ArrayBuffer(e.length),a=new Uint8Array(t),o=0;o!=e.length;++o)a[o]=255&e.charCodeAt(o);return t}function w(e){let t="",a=0;while(e>0)a=e%26+1,t=String.fromCharCode(a+64)+t,e=(e-a)/26;return t}var y={name:"database",props:{msg:String},data(){return{tableData:[],multipleSelection:[],pageSizes:[5,10,15,20,50,100],pageTotal:0,pageIndex:1,pageSize:10,allData:[],dao:" 导出Excel",dialogVisible:!1,form:{name:""},imageUrl:"",imgFile:""}},mounted(){this.query(),this.query(1,10)},methods:{handleAvatarSuccess(e,t){this.imgFile=t.raw,this.imageUrl=URL.createObjectURL(t.raw)},beforeAvatarUpload(e){console.log(e.type);const t="image/jpeg"===e.type||"image/png",a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 或 PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},confirmAddUser(){var e=this;this.dialogVisible=!1,console.log(e.form);var t=new FormData;t.append("file",e.imgFile),e.axios.post(webHost+"/upload",t).then(e=>{console.log(e)}).catch(e=>{console.error(e)})},downloadExcel(){this.multipleSelection.length>0?v(this.multipleSelection):v(this.allData)},query(e,t){var a=this;let o=localStorage.getItem("token"),l={dataBase:"SFCMS",collectionName:"adminInfo",page:e,pageSize:t,token:o};a.axios.post(host+"/query",l).then(o=>{e||t?a.tableData=o.data:(a.pageTotal=o.data.length,a.allData=o.data)})},handleSizeChange(e){this.pageSize=e,this.query(this.pageIndex,this.pageSize)},handleCurrentChange(e){this.pageIndex=e,this.query(this.pageIndex,this.pageSize)},toggleSelection(e){e?e.forEach(e=>{this.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange(e){var t=this;this.multipleSelection=e,this.multipleSelection.length>0?t.dao=" 导出选中Excel":t.dao=" 导出Excel"},handleClose(e){this.$confirm("确认关闭？").then(t=>{e()}).catch(e=>{})}}},x=y,C=(a("5fd5"),Object(c["a"])(x,h,g,!1,null,null,null)),I=C.exports,_={name:"home",components:{database:I},data(){return{text:"添加一条数据",name:"",headImg:"",listIconStyle:"margin-right:15px",openeds:["1"],currentRow:null,menuIndex:""}},mounted(){var e=this;if(localStorage.getItem("token")){let a={dataBase:"SFCMS",collectionName:"adminInfo",data:{name:"sf"},token:localStorage.getItem("token")};function t(){let t=JSON.parse(localStorage.getItem("userInfo"));e.name=t.name,e.headImg=t.headImg}"undefined"!=localStorage.getItem("userInfo")&&null!=localStorage.getItem("userInfo")?(t(),e.axios.post(host+"/query",a).then(e=>{JSON.stringify(e.data[0])!=localStorage.getItem("userInfo")&&(localStorage.setItem("userInfo",JSON.stringify(e.data[0])),t())})):(console.log(2),e.axios.post(host+"/query",a).then(e=>{localStorage.setItem("userInfo",JSON.stringify(e.data[0])),t()}))}else e.$router.replace("/")},methods:{handleOpen(e,t){console.log(e,t)},handleClose(e,t){console.log(e,t)},handleSelect(e,t){this.menuIndex=e},open2(){var e=this;this.$confirm("是否继续退出账号?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(()=>{localStorage.removeItem("token"),e.$router.replace("/")}).catch(()=>{})}}},O=_,k=(a("f874"),Object(c["a"])(O,f,m,!1,null,"80a1a86a",null)),j=k.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"about"},[a("el-form",{ref:"login",staticClass:"loginModel",attrs:{"label-position":e.labelPosition,rules:e.loginRules,"label-width":"80px",model:e.login}},[a("el-form-item",{attrs:{label:"账号",prop:"account"}},[a("el-input",{model:{value:e.login.account,callback:function(t){e.$set(e.login,"account",t)},expression:"login.account"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{"show-password":""},model:{value:e.login.password,callback:function(t){e.$set(e.login,"password",t)},expression:"login.password"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("login")}}},[e._v("提交")]),a("el-button",{on:{click:function(t){return e.resetForm("login")}}},[e._v("重置")])],1)],1),e.alertShow?a("el-alert",{staticClass:"errAlert",attrs:{title:"账号或密码错误",type:"error",closable:e.closable,"show-icon":""}}):e._e()],1)},E=[],T={name:"login",data(){var e=(e,t,a)=>{""===t?a(new Error("请输入账号")):a()},t=(e,t,a)=>{""===t?a(new Error("请输入密码")):a()};return{labelPosition:"left",login:{account:"",password:""},loginRules:{account:[{validator:e,trigger:"blur"}],password:[{validator:t,trigger:"blur"}]},closable:!1,alertShow:!1}},mounted(){},methods:{submitForm(e){var t=this;const a={account:t.md5(t.login.account),password:t.md5(t.login.password)};this.$refs[e].validate(e=>{if(!e)return!1;{let e=this.$loading();t.axios.post(host+"/admin",a).then(a=>{if(a.data){let e=a.data;localStorage.setItem("token",e),t.alertShow=!1,t.$router.replace("home")}else t.alertShow=!0;e.close()}).catch(e=>{console.error(e)})}})},resetForm(e){this.$refs[e].resetFields()}}},U=T,z=(a("ce81"),Object(c["a"])(U,$,E,!1,null,"73b4cd1a",null)),B=z.exports;l["default"].use(p["a"]);var F=new p["a"]({base:"/",routes:[{path:"/",name:"login",component:B},{path:"/home",name:"home",component:j}]}),A=a("2f62");l["default"].use(A["a"]);var L=new A["a"].Store({state:{},mutations:{},actions:{}}),P=a("bc3a"),R=a.n(P),M=(a("0fae"),a("c69f"),a("5c96")),N=a.n(M);l["default"].use(N.a);var q=a("6821"),D=a.n(q),J=a("109c");l["default"].prototype.md5=D.a,l["default"].prototype.axios=R.a,l["default"].prototype.Loading=M["Loading"],l["default"].prototype.TweenMax=J["a"],l["default"].config.productionTip=!1,new l["default"]({router:F,store:L,render:function(e){return e(d)}}).$mount("#app")},"5fd5":function(e,t,a){"use strict";var o=a("6a66"),l=a.n(o);l.a},"64a9":function(e,t,a){},"6a66":function(e,t,a){},"88ef":function(e,t,a){},c69f:function(e,t,a){},ce81:function(e,t,a){"use strict";var o=a("88ef"),l=a.n(o);l.a},f874:function(e,t,a){"use strict";var o=a("3bec"),l=a.n(o);l.a}});
//# sourceMappingURL=app.d4f38406.js.map